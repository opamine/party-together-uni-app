import{_ as e}from"./uni-icons.aF66O07D.js";import{c as t,r as a,o as s,a as i,w as l,b as n,d as o,y as c,i as r,h as u,t as p,n as d,x as h,s as m,k as f,e as g,f as _,F as y,I as v}from"./index-dWdSE1tu.js";import{r as b}from"./uni-app.es.iIF8edm5.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const k=x({name:"uniCollapseItem",props:{title:{type:String,default:""},name:{type:[Number,String],default:""},disabled:{type:Boolean,default:!1},showAnimation:{type:Boolean,default:!0},open:{type:Boolean,default:!1},thumb:{type:String,default:""},titleBorder:{type:String,default:"auto"},border:{type:Boolean,default:!0},showArrow:{type:Boolean,default:!0}},data:()=>({isOpen:!1,isheight:null,height:0,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,nameSync:0}),watch:{open(e){this.isOpen=e,this.onClick(e,"init")}},updated(e){this.$nextTick((()=>{this.init(!0)}))},created(){this.collapse=this.getCollapse(),this.oldHeight=0,this.onClick(this.open,"init")},unmounted(){this.__isUnmounted=!0,this.uninstall()},mounted(){this.collapse&&(""!==this.name?this.nameSync=this.name:this.nameSync=this.collapse.childrens.length+"",-1===this.collapse.names.indexOf(this.nameSync)?this.collapse.names.push(this.nameSync):console.warn(`name 值 ${this.nameSync} 重复`),-1===this.collapse.childrens.indexOf(this)&&this.collapse.childrens.push(this),this.init())},methods:{init(e){this.getCollapseHeight(e)},uninstall(){this.collapse&&(this.collapse.childrens.forEach(((e,t)=>{e===this&&this.collapse.childrens.splice(t,1)})),this.collapse.names.forEach(((e,t)=>{e===this.nameSync&&this.collapse.names.splice(t,1)})))},onClick(e,t){this.disabled||(this.isOpen=e,this.isOpen&&this.collapse&&this.collapse.setAccordion(this),"init"!==t&&this.collapse.onChange(e,this))},getCollapseHeight(e,a=0){t().in(this).select(`#${this.elId}`).fields({size:!0},(t=>{if(!(a>=10)){if(!t)return a++,void this.getCollapseHeight(!1,a);this.height=t.height,this.isheight=!0,e||this.onClick(this.isOpen,"init")}})).exec()},getNvueHwight(e){dom.getComponentRect(this.$refs["collapse--hook"],(t=>{if(t&&t.result&&t.size){if(this.height=t.size.height,this.isheight=!0,e)return;this.onClick(this.open,"init")}}))},getCollapse(e="uniCollapse"){let t=this.$parent,a=t.$options.name;for(;a!==e;){if(t=t.$parent,!t)return!1;a=t.$options.name}return t}}},[["render",function(t,g,_,y,v,x){const k=h,C=m,w=f,A=b(a("uni-icons"),e);return s(),i(w,{class:"uni-collapse-item"},{default:l((()=>[n(w,{onClick:g[0]||(g[0]=e=>x.onClick(!v.isOpen)),class:o(["uni-collapse-item__title",{"is-open":v.isOpen&&"auto"===_.titleBorder,"uni-collapse-item-border":"none"!==_.titleBorder}])},{default:l((()=>[n(w,{class:"uni-collapse-item__title-wrap"},{default:l((()=>[c(t.$slots,"title",{},(()=>[n(w,{class:o(["uni-collapse-item__title-box",{"is-disabled":_.disabled}])},{default:l((()=>[_.thumb?(s(),i(k,{key:0,src:_.thumb,class:"uni-collapse-item__title-img"},null,8,["src"])):r("",!0),n(C,{class:"uni-collapse-item__title-text"},{default:l((()=>[u(p(_.title),1)])),_:1})])),_:1},8,["class"])]),!0)])),_:3}),_.showArrow?(s(),i(w,{key:0,class:o([{"uni-collapse-item__title-arrow-active":v.isOpen,"uni-collapse-item--animation":!0===_.showAnimation},"uni-collapse-item__title-arrow"])},{default:l((()=>[n(A,{color:_.disabled?"#ddd":"#bbb",size:"14",type:"bottom"},null,8,["color"])])),_:1},8,["class"])):r("",!0)])),_:3},8,["class"]),n(w,{class:o(["uni-collapse-item__wrap",{"is--transition":_.showAnimation}]),style:d({height:(v.isOpen?v.height:0)+"px"})},{default:l((()=>[n(w,{id:v.elId,ref:"collapse--hook",class:o(["uni-collapse-item__wrap-content",{open:v.isheight,"uni-collapse-item--border":_.border&&v.isOpen}])},{default:l((()=>[c(t.$slots,"default",{},void 0,!0)])),_:3},8,["id","class"])])),_:3},8,["class","style"])])),_:3})}],["__scopeId","data-v-d9eb4150"]]);const C=x({name:"uniCollapse",emits:["change","activeItem","input","update:modelValue"],props:{value:{type:[String,Array],default:""},modelValue:{type:[String,Array],default:""},accordion:{type:[Boolean,String],default:!1}},data:()=>({}),computed:{dataValue(){let e="string"==typeof this.value&&""===this.value||Array.isArray(this.value)&&0===this.value.length;"string"==typeof this.modelValue&&""===this.modelValue||Array.isArray(this.modelValue)&&this.modelValue.length;return e?this.modelValue:this.value}},watch:{dataValue(e){this.setOpen(e)}},created(){this.childrens=[],this.names=[]},mounted(){this.$nextTick((()=>{this.setOpen(this.dataValue)}))},methods:{setOpen(e){let t="string"==typeof e,a=Array.isArray(e);this.childrens.forEach(((s,i)=>{if(t&&e===s.nameSync){if(!this.accordion)return void console.warn("accordion 属性为 false ,v-model 类型应该为 array");s.isOpen=!0}a&&e.forEach((e=>{if(e===s.nameSync){if(this.accordion)return void console.warn("accordion 属性为 true ,v-model 类型应该为 string");s.isOpen=!0}}))})),this.emit(e)},setAccordion(e){this.accordion&&this.childrens.forEach(((t,a)=>{e!==t&&(t.isOpen=!1)}))},resize(){this.childrens.forEach(((e,t)=>{e.getCollapseHeight()}))},onChange(e,t){let a=[];this.accordion?a=e?t.nameSync:"":this.childrens.forEach(((e,t)=>{e.isOpen&&a.push(e.nameSync)})),this.$emit("change",a),this.emit(a)},emit(e){this.$emit("input",e),this.$emit("update:modelValue",e)}}},[["render",function(e,t,a,n,o,r){const u=f;return s(),i(u,{class:"uni-collapse"},{default:l((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3})}],["__scopeId","data-v-3aec18a2"]]);const w=x({data:()=>({applicationData:[{id:0,avatar:"https://avatars.githubusercontent.com/u/39261479?s=64&v=4",name:"李思思"},{id:1,avatar:"https://avatars.githubusercontent.com/u/11247099?s=64&v=4",name:"肖恩"},{id:2,avatar:"https://avatars.githubusercontent.com/u/10172199?s=96&v=4",name:"Devikl"},{id:3,avatar:"https://avatars.githubusercontent.com/u/10172199?s=96&v=4",name:"Devikl"}],collapseExpandIndexArray:["0","1"],groupListData:[{id:0,groupName:"A组"},{id:1,groupName:"B组"}],patientsData:[{id:0,name:"张三",avatar:"https://avatars.githubusercontent.com/u/10172199?s=96&v=4",gender:"female",remark:"这里是备注这里是备注",group:0},{id:1,name:"李四",avatar:"https://avatars.githubusercontent.com/u/615401?v=4",gender:"male",remark:"这里是备注这里是备注",group:0},{id:2,name:"王五",avatar:"https://avatars.githubusercontent.com/u/10216932?v=4",gender:"male",remark:"这里是备注这里是备注",group:1},{id:3,name:"周嘉善",avatar:"https://avatars.githubusercontent.com/u/16557978?v=4",gender:"male",remark:"这里是备注这里是备注",group:1},{id:4,name:"赵文静",avatar:"https://avatars.githubusercontent.com/u/90562015?s=64&v=4",gender:"male",remark:"这里是备注这里是备注",group:1}]}),methods:{collapseChange(e){this.collapseExpandIndexArray=e}}},[["render",function(t,o,c,d,x,w){const A=b(a("uni-icons"),e),O=f,S=v,$=h,z=m,I=b(a("uni-collapse-item"),k),D=b(a("uni-collapse"),C);return s(),i(O,{class:"fans-container"},{default:l((()=>[n(O,{class:"input-container"},{default:l((()=>[n(O,{class:"icon-container"},{default:l((()=>[n(A,{"custom-prefix":"iconfont",type:"icon-fenxiang",size:"16",color:"#bbbbbb"})])),_:1}),n(S,{type:"text","confirm-type":"search",class:"uni-input",placeholder:"搜索好友(姓名)","placeholder-class":"uni-input-placeholder"})])),_:1}),x.applicationData.length?(s(),i(O,{key:0,class:"patient-application"},{default:l((()=>[n(O,{class:"title"},{default:l((()=>[n(O,{class:"title-icon"}),n(O,{class:"title-text"},{default:l((()=>[u("好友申请")])),_:1}),n(O,{class:"title-tip"},{default:l((()=>[u(p(x.applicationData.length)+"个陌生人发来申请",1)])),_:1})])),_:1}),n(O,{class:"application-list-container"},{default:l((()=>[n(O,{class:"application-list"},{default:l((()=>[(s(!0),g(y,null,_(x.applicationData.slice(0,3),((e,t)=>(s(),i(O,{key:t,class:"application-list-item"},{default:l((()=>[n(O,{class:"avatar-name"},{default:l((()=>[n(O,null,{default:l((()=>[n($,{class:"avatar",src:e.avatar,mode:"aspectFill"},null,8,["src"])])),_:2},1024),n(O,{class:"name"},{default:l((()=>[u(p(e.name),1)])),_:2},1024)])),_:2},1024),n(O,{class:"actions"},{default:l((()=>[n(O,{class:"add"},{default:l((()=>[u("添加")])),_:1}),n(O,{class:"cancel"},{default:l((()=>[n(A,{"custom-prefix":"iconfont",type:"icon-cuowuguanbiquxiao",size:"12"})])),_:1})])),_:1})])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1})):r("",!0),x.groupListData.length?(s(),i(O,{key:1,class:"patient-group"},{default:l((()=>[n(O,{class:"title"},{default:l((()=>[n(O,{class:"title-icon"}),n(O,{class:"title-text"},{default:l((()=>[u("好友分组")])),_:1}),n(O,{class:"title-tip"},{default:l((()=>[n(A,{"custom-prefix":"iconfont",type:"icon-fenzu",size:"14",color:"#bbbbbb"}),n(z,{style:{"margin-left":"6px"}},{default:l((()=>[u("分组管理")])),_:1})])),_:1})])),_:1}),n(O,{class:"group-list-container"},{default:l((()=>[n(O,{class:"group-list"},{default:l((()=>[n(O,{class:"group-list-item"},{default:l((()=>[n(D,{onChange:w.collapseChange},{default:l((()=>[(s(!0),g(y,null,_(x.groupListData,((e,t)=>(s(),i(I,{key:e.id,open:Boolean(x.collapseExpandIndexArray.find((e=>e===`${t}`))),"show-arrow":!1,border:!1,"title-border":"none"},{title:l((()=>[n(O,{class:"collapse-item-title"},{default:l((()=>[n(O,{class:"icon-container"},{default:l((()=>[n(A,{"custom-prefix":"iconfont",type:x.collapseExpandIndexArray.find((e=>e===`${t}`))?"icon-xiajiantou":"icon-shangjiantou",size:"12",color:"#888ca5"},null,8,["type"])])),_:2},1024),n(O,{class:"group-name"},{default:l((()=>[u(p(e.groupName),1)])),_:2},1024),n(O,{class:"group-patients-count"},{default:l((()=>[u("("+p(x.patientsData.filter((t=>t.group===e.id)).length)+")",1)])),_:2},1024)])),_:2},1024)])),default:l((()=>[n(O,{class:"collapse-item-content"},{default:l((()=>[n(O,{class:"patient-list"},{default:l((()=>[(s(!0),g(y,null,_(x.patientsData.filter((t=>t.group===e.id)),(e=>(s(),i(O,{key:e.id,class:"patient-list-item"},{default:l((()=>[n(O,{class:"patient-info"},{default:l((()=>[n(O,{class:"avatar-container"},{default:l((()=>[n($,{class:"avatar",src:e.avatar,mode:"aspectFill"},null,8,["src"])])),_:2},1024),n(O,{class:"name-remark"},{default:l((()=>[n(O,{class:"name"},{default:l((()=>[u(p(e.name)+" ",1),n(A,{"custom-prefix":"iconfont",type:"male"===e.gender?"icon-male":"icon-female",size:"14",color:"male"===e.gender?"blue":"pink"},null,8,["type","color"])])),_:2},1024),n(O,{class:"remark"},{default:l((()=>[u(p(e.remark),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),n(O,{class:"action"},{default:l((()=>[n(A,{"custom-prefix":"iconfont",type:"icon-shoucangxuanzhong",size:"20",color:"#ffbe43"})])),_:1})])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)])),_:2},1032,["open"])))),128))])),_:1},8,["onChange"])])),_:1})])),_:1})])),_:1})])),_:1})):r("",!0)])),_:1})}],["__scopeId","data-v-c13f7335"]]);export{w as default};
