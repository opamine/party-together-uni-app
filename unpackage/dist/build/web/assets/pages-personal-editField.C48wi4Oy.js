import{r as e,o as t,a as l,w as a,b as i,d as o,n as r,i as n,y as s,h as d,t as u,k as c,s as p,G as h,I as f,c as m,H as g,J as y,K as b,L as S,M as v,m as C,D as k,E as x,e as _,f as w,F as D,N as F}from"./index-CU53kGQk.js";import{_ as I}from"./u-icon.DGjF6L1A.js";import{r as B}from"./uni-app.es.CQ6hYvRK.js";import{_ as N}from"./_plugin-vue_export-helper.BCo6x5W8.js";import{_ as T}from"./uni-icons.DhGjUbg6.js";import{_ as $}from"./u-picker.LiVEhoQc.js";const M=N({name:"u-field",emits:["update:modelValue","input","focus","blur","confirm","right-icon-click","click"],props:{value:[Number,String],modelValue:[Number,String],icon:String,rightIcon:String,arrowDirection:{type:String,default:"right"},required:Boolean,label:String,password:Boolean,clearable:{type:Boolean,default:!0},labelWidth:{type:[Number,String],default:130},labelAlign:{type:String,default:"left"},inputAlign:{type:String,default:"left"},iconColor:{type:String,default:"#606266"},autoHeight:{type:Boolean,default:!0},errorMessage:{type:[String,Boolean],default:""},placeholder:String,placeholderStyle:String,focus:Boolean,fixed:Boolean,type:{type:String,default:"text"},disabled:{type:Boolean,default:!1},maxlength:{type:[Number,String],default:140},confirmType:{type:String,default:"done"},labelPosition:{type:String,default:"left"},fieldStyle:{type:Object,default:()=>({})},clearSize:{type:[Number,String],default:30},iconStyle:{type:Object,default:()=>({})},borderTop:{type:Boolean,default:!1},borderBottom:{type:Boolean,default:!0},trim:{type:Boolean,default:!0}},data:()=>({focused:!1,itemIndex:0}),computed:{valueCom(){return this.modelValue},inputWrapStyle(){let e={};return e.textAlign=this.inputAlign,"left"==this.labelPosition?e.margin="0 8rpx":e.marginRight="8rpx",e},rightIconStyle(){let e={},t={top:"-90deg",bottom:"90deg",left:"180deg",right:"0deg"}[this.arrowDirection]||"0deg";return e.transform="rotate("+t+")",e},labelStyle(){let e={};return"left"==this.labelAlign&&(e.justifyContent="flext-start"),"center"==this.labelAlign&&(e.justifyContent="center"),"right"==this.labelAlign&&(e.justifyContent="flext-end"),e},justifyContent(){return"left"==this.labelAlign?"flex-start":"center"==this.labelAlign?"center":"right"==this.labelAlign?"flex-end":void 0},inputMaxlength(){return Number(this.maxlength)},fieldInnerStyle(){let e={};return"left"==this.labelPosition?e.flexDirection="row":e.flexDirection="column",e}},methods:{onInput(e){let t=e.detail.value;this.trim&&(t=this.$u.trim(t)),this.$emit("input",t),this.$emit("update:modelValue",t)},onFocus(e){this.focused=!0,this.$emit("focus",e)},onBlur(e){setTimeout((()=>{this.focused=!1}),100),this.$emit("blur",e)},onConfirm(e){this.$emit("confirm",e.detail.value)},onClear(e){this.$emit("input",""),this.$emit("update:modelValue","")},rightIconClick(){this.$emit("right-icon-click"),this.$emit("click")},fieldClick(){this.$emit("click")}}},[["render",function(m,g,y,b,S,v){const C=B(e("u-icon"),I),k=c,x=p,_=h,w=f;return t(),l(k,{class:o(["u-field",{"u-border-top":y.borderTop,"u-border-bottom":y.borderBottom}])},{default:a((()=>[i(k,{class:o(["u-field-inner",["textarea"==y.type?"u-textarea-inner":"","u-label-postion-"+y.labelPosition]])},{default:a((()=>[i(k,{class:o(["u-label",[y.required?"u-required":""]]),style:r({justifyContent:v.justifyContent,flex:"left"==y.labelPosition?`0 0 ${y.labelWidth}rpx`:"1"})},{default:a((()=>[y.icon?(t(),l(k,{key:0,class:"u-icon-wrap"},{default:a((()=>[i(C,{size:"32","custom-style":y.iconStyle,name:y.icon,color:y.iconColor,class:"u-icon"},null,8,["custom-style","name","color"])])),_:1})):n("",!0),s(m.$slots,"icon",{},void 0,!0),i(x,{class:o(["u-label-text",[m.$slots.icon||y.icon?"u-label-left-gap":""]])},{default:a((()=>[d(u(y.label),1)])),_:1},8,["class"])])),_:3},8,["class","style"]),i(k,{class:"fild-body"},{default:a((()=>[i(k,{class:"u-flex-1 u-flex",style:r([v.inputWrapStyle])},{default:a((()=>["textarea"==y.type?(t(),l(_,{key:0,class:"u-flex-1 u-textarea-class",style:r([y.fieldStyle]),value:v.valueCom,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,disabled:y.disabled,maxlength:v.inputMaxlength,focus:y.focus,autoHeight:y.autoHeight,fixed:y.fixed,onInput:v.onInput,onBlur:v.onBlur,onFocus:v.onFocus,onConfirm:v.onConfirm,onClick:v.fieldClick},null,8,["style","value","placeholder","placeholderStyle","disabled","maxlength","focus","autoHeight","fixed","onInput","onBlur","onFocus","onConfirm","onClick"])):(t(),l(w,{key:1,style:r([y.fieldStyle]),type:y.type,class:"u-flex-1 u-field__input-wrap",value:v.valueCom,password:y.password||"password"===y.type,placeholder:y.placeholder,placeholderStyle:y.placeholderStyle,disabled:y.disabled,maxlength:v.inputMaxlength,focus:y.focus,confirmType:y.confirmType,onFocus:v.onFocus,onBlur:v.onBlur,onInput:v.onInput,onConfirm:v.onConfirm,onClick:v.fieldClick},null,8,["style","type","value","password","placeholder","placeholderStyle","disabled","maxlength","focus","confirmType","onFocus","onBlur","onInput","onConfirm","onClick"]))])),_:1},8,["style"]),y.clearable&&""!=v.valueCom&&S.focused?(t(),l(C,{key:0,size:y.clearSize,name:"close-circle-fill",color:"#c0c4cc",class:"u-clear-icon",onClick:v.onClear},null,8,["size","onClick"])):n("",!0),i(k,{class:"u-button-wrap"},{default:a((()=>[s(m.$slots,"right",{},void 0,!0)])),_:3}),y.rightIcon?(t(),l(C,{key:1,onClick:v.rightIconClick,name:y.rightIcon,color:"#c0c4cc",style:r([v.rightIconStyle]),size:"26",class:"u-arror-right"},null,8,["onClick","name","style"])):n("",!0)])),_:3})])),_:3},8,["class"]),!1!==y.errorMessage&&""!=y.errorMessage?(t(),l(k,{key:0,class:"u-error-message",style:r({paddingLeft:y.labelWidth+"rpx"})},{default:a((()=>[d(u(y.errorMessage),1)])),_:1},8,["style"])):n("",!0)])),_:3},8,["class"])}],["__scopeId","data-v-7a7facb7"]]);const K=N({name:"u-button",emits:["click","getphonenumber","getuserinfo","error","opensetting","launchapp","chooseavatar"],props:{hairLine:{type:Boolean,default:!0},type:{type:String,default:"default"},size:{type:String,default:"default"},shape:{type:String,default:"square"},plain:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},openType:{type:String,default:""},formType:{type:String,default:""},appParameter:{type:String,default:""},hoverStopPropagation:{type:Boolean,default:!1},lang:{type:String,default:"en"},sessionFrom:{type:String,default:""},sendMessageTitle:{type:String,default:""},sendMessagePath:{type:String,default:""},sendMessageImg:{type:String,default:""},showMessageCard:{type:Boolean,default:!1},hoverBgColor:{type:String,default:""},rippleBgColor:{type:String,default:""},ripple:{type:Boolean,default:!1},hoverClass:{type:String,default:""},customStyle:{type:Object,default:()=>({})},dataName:{type:String,default:""},throttleTime:{type:[String,Number],default:500},hoverStartTime:{type:[String,Number],default:20},hoverStayTime:{type:[String,Number],default:150},timerId:{type:[String,Number]}},computed:{getHoverClass(){if(this.loading||this.disabled||this.ripple||this.hoverClass)return"";let e="";return e=this.plain?"u-"+this.type+"-plain-hover":"u-"+this.type+"-hover",e},showHairLineBorder(){return["primary","success","error","warning"].indexOf(this.type)>=0&&!this.plain?"":"u-hairline-border"}},data(){return{btnTimerId:this.timerId||"button_"+Math.floor(1e8*Math.random()+0),rippleTop:0,rippleLeft:0,fields:{},waveActive:!1}},methods:{click(e){this.$u.throttle((()=>{!0!==this.loading&&!0!==this.disabled&&(this.ripple&&(this.waveActive=!1,this.$nextTick((function(){this.getWaveQuery(e)}))),this.$emit("click",e))}),this.throttleTime,!0,this.btnTimerId)},getWaveQuery(e){this.getElQuery().then((t=>{let l=t[0];if(!l.width||!l.width)return;if(l.targetWidth=l.height>l.width?l.height:l.width,!l.targetWidth)return;this.fields=l;let a="",i="";a=e.touches[0].clientX,i=e.touches[0].clientY,this.rippleTop=i-l.top-l.targetWidth/2,this.rippleLeft=a-l.left-l.targetWidth/2,this.$nextTick((()=>{this.waveActive=!0}))}))},getElQuery(){return new Promise((e=>{let t="";t=m().in(this),t.select(".u-btn").boundingClientRect(),t.exec((t=>{e(t)}))}))},getphonenumber(e){this.$emit("getphonenumber",e)},getuserinfo(e){this.$emit("getuserinfo",e)},error(e){this.$emit("error",e)},opensetting(e){this.$emit("opensetting",e)},launchapp(e){this.$emit("launchapp",e)},chooseavatar(e){this.$emit("chooseavatar",e)}}},[["render",function(e,i,d,u,p,h){const f=c,m=y;return t(),l(m,{id:"u-wave-btn",class:o(["u-btn u-line-1 u-fix-ios-appearance",["u-size-"+d.size,d.plain?"u-btn--"+d.type+"--plain":"",d.loading?"u-loading":"","circle"==d.shape?"u-round-circle":"",d.hairLine?h.showHairLineBorder:"u-btn--bold-border","u-btn--"+d.type,d.disabled?`u-btn--${d.type}--disabled`:""]]),"hover-start-time":Number(d.hoverStartTime),"hover-stay-time":Number(d.hoverStayTime),disabled:d.disabled,"form-type":d.formType,"open-type":d.openType,"app-parameter":d.appParameter,"hover-stop-propagation":d.hoverStopPropagation,"send-message-title":d.sendMessageTitle,"send-message-path":"sendMessagePath",lang:d.lang,"data-name":d.dataName,"session-from":d.sessionFrom,"send-message-img":d.sendMessageImg,"show-message-card":d.showMessageCard,onGetphonenumber:h.getphonenumber,onGetuserinfo:h.getuserinfo,onError:h.error,onOpensetting:h.opensetting,onLaunchapp:h.launchapp,onChooseavatar:h.chooseavatar,style:r([d.customStyle,{overflow:d.ripple?"hidden":"visible"}]),onClick:i[0]||(i[0]=g((e=>h.click(e)),["stop"])),"hover-class":h.getHoverClass,loading:d.loading},{default:a((()=>[s(e.$slots,"default",{},void 0,!0),d.ripple?(t(),l(f,{key:0,class:o(["u-wave-ripple",[p.waveActive?"u-wave-active":""]]),style:r({top:p.rippleTop+"px",left:p.rippleLeft+"px",width:p.fields.targetWidth+"px",height:p.fields.targetWidth+"px","background-color":d.rippleBgColor||"rgba(0, 0, 0, 0.15)"})},null,8,["class","style"])):n("",!0)])),_:3},8,["class","hover-start-time","hover-stay-time","disabled","form-type","open-type","app-parameter","hover-stop-propagation","send-message-title","lang","data-name","session-from","send-message-img","show-message-card","onGetphonenumber","onGetuserinfo","onError","onOpensetting","onLaunchapp","onChooseavatar","style","hover-class","loading"])}],["__scopeId","data-v-270e3a6c"]]),P=["INTJ","INTP","ENTJ","ENTP","INFJ","INFP","ENFJ","ENFP","ISTJ","ISFJ","ESTJ","ESFJ","ISTP","ISFP","ESTP","ESFP"];const V=N({data:()=>({tip:"",modifiable:!1,editFieldName:"",editFieldKey:"",value:void 0,rule:{account:{message:"6-15 个字符，仅可使用英文（必须）、数字、下划线"},nickName:{message:"请设置 2-24 个字符，不包括 @<>/ 等无效字符哦"}},regionSelectorShow:!1,careerSelectorShow:!1,careerOriginData:[{id:0,name:"互联网",children:[{id:0,name:"互联网从业者"},{id:1,name:"前端开发工程师"},{id:2,name:"后端开发工程师"}]},{id:1,name:"科技数码",children:[{id:0,name:"数码博主"},{id:1,name:"摄影博主"}]}],careerData:[["互联网","科技数码"],["互联网从业者","前端开发工程师","后端开发工程师"]],careerSelectorDefaultSelect:[0,0],MbtiData:P,mbtiSelectorShow:!1,mbtiSelectorDefaultSelect:[0]}),computed:{startDate(){return this.getDate("start")},endDate(){return this.getDate("end")}},onLoad(e){var t;const{fieldKey:l}=e,a=C(),{userInfo:i,BaseUserInfoFieldsList:o}=a.globalData,r=null==(t=o.find((e=>e.fieldKey===l)))?void 0:t.fieldName;switch(b({title:`编辑${r}`}),this.editFieldName=r,this.editFieldKey=l,this.value="career"===l?[...i[l]]:i[l],l){case"account":this.tip=i.accountModified?"修改次数已达上限":"账号只可修改一次",this.modifiable=!i.accountModified;break;case"nickName":const e=(Date.now()-i.nickNameLastModified)/864e5;this.tip=e>=7?"七天内可修改一次":"抱歉，七天内只能修改一次",this.modifiable=e>=7;break;case"signature":const t=(Date.now()-i.nickNameLastModified)/864e5;this.tip=t>=3?"三天内可修改一次":"抱歉，三天内只能修改一次",this.modifiable=t>=3;break;default:this.modifiable=!0}},methods:{getDate(e){const t=new Date;let l=t.getFullYear(),a=t.getMonth()+1,i=t.getDate();return"start"===e?l-=60:"end"===e&&(l+=2),a=a>9?a:"0"+a,i=i>9?i:"0"+i,`${l}-${a}-${i}`},modifyGender(e){this.value=e},bindBirthdayDateChange(e){this.value=e.detail.value},regionSelectConfirm(e){const t=[e.province.name,e.city.name,e.area.name];this.value=t},removeCareer(e){this.value.splice(e,1)},careerSelectStart(){if(this.value&&this.value.length){const e=this.value[this.value.length-1].split("-"),t=this.careerOriginData.findIndex((t=>t.name===e[0])),l=this.careerOriginData[t].children.findIndex((t=>t.name===e[1]));this.careerSelectorDefaultSelect=[t,l],this.careerData[1]=this.careerOriginData[t].children.map((e=>e.name))}else this.careerSelectorDefaultSelect=[0,0],this.careerData[1]=this.careerOriginData[0].children.map((e=>e.name));this.careerSelectorShow=!0},careerColumnChange({column:e,index:t}){0===e&&(this.careerData[1]=this.careerOriginData[t].children.map((e=>e.name)))},careerSelectConfirm(e){const t=this.careerData[0][e[0]]+"-"+this.careerData[1][e[1]];this.value.push(t)},mbtiSelectStart(){if(this.value){const e=this.MbtiData.findIndex((e=>e===this.value));this.mbtiSelectorDefaultSelect=e>-1?[e]:[0]}else this.mbtiSelectorDefaultSelect=[0];this.mbtiSelectorShow=!0},mbtiSelectConfirm(e){this.value=this.MbtiData[e[0]]},handleSave(){if(["account","nickName"].includes(this.editFieldKey)){if("account"===this.editFieldKey){if(!(this.value&&/^\w{6,15}$/.test(this.value)&&/[a-zA-Z]/.exec(this.value)))return S({icon:"none",title:"账号格式不符",duration:2e3})}if("nickName"===this.editFieldKey){const e=this.value&&/^[^@<>/]{2,24}$/.test(this.value);if(console.log(e),!e)return S({icon:"none",title:"昵称格式不符",duration:2e3})}}console.log(this.editFieldName),console.log(this.editFieldKey),console.log(this.value);const e=C(),{userInfo:t}=e.globalData;t[this.editFieldKey]=this.value,v()}}},[["render",function(o,r,s,h,f,m){const g=p,y=c,b=B(e("u-field"),M),S=B(e("uni-icons"),T),v=F,C=B(e("u-picker"),$),I=B(e("u-button"),K);return t(),l(y,{class:"edit-field-container"},{default:a((()=>[f.tip?(t(),l(y,{key:0,class:"tip"},{default:a((()=>[i(g,null,{default:a((()=>[d(u(f.tip),1)])),_:1})])),_:1})):n("",!0),i(y,{class:"form-container"},{default:a((()=>["account"===f.editFieldKey||"nickName"===f.editFieldKey?(t(),l(y,{key:0},{default:a((()=>[i(b,{modelValue:f.value,"onUpdate:modelValue":r[0]||(r[0]=e=>f.value=e),type:"text",disabled:!f.modifiable,style:{padding:"0 !important"},"label-width":0,"border-bottom":!1,clearable:!1,maxlength:"account"===f.editFieldKey?15:24},{right:a((()=>[i(y,{style:{color:"#ccc"}},{default:a((()=>[d(u(f.value.length)+"/"+u("account"===f.editFieldKey?15:24),1)])),_:1})])),_:1},8,["modelValue","disabled","maxlength"])])),_:1})):n("",!0),"signature"===f.editFieldKey?(t(),l(y,{key:1},{default:a((()=>[i(b,{modelValue:f.value,"onUpdate:modelValue":r[1]||(r[1]=e=>f.value=e),type:"textarea",style:{padding:"0 !important"},"label-width":0,"border-bottom":!1,clearable:!1,maxlength:100},null,8,["modelValue"]),i(y,{style:{color:"#ccc","text-align":"right"}},{default:a((()=>[d(u(f.value.length)+"/"+u(100),1)])),_:1})])),_:1})):n("",!0),"gender"===f.editFieldKey?(t(),l(y,{key:2},{default:a((()=>[i(y,{class:"gender-item",onClick:r[2]||(r[2]=e=>m.modifyGender("male"))},{default:a((()=>[i(y,null,{default:a((()=>[d("男")])),_:1}),k(i(y,null,{default:a((()=>[i(S,{type:"checkmarkempty",size:"28rpx"})])),_:1},512),[[x,"male"===f.value]])])),_:1}),i(y,{class:"gender-item",onClick:r[3]||(r[3]=e=>m.modifyGender("female"))},{default:a((()=>[i(y,null,{default:a((()=>[d("女")])),_:1}),k(i(y,null,{default:a((()=>[i(S,{type:"checkmarkempty",size:"28rpx"})])),_:1},512),[[x,"female"===f.value]])])),_:1})])),_:1})):n("",!0),"birthday"===f.editFieldKey?(t(),l(y,{key:3},{default:a((()=>[i(y,null,{default:a((()=>[i(v,{mode:"date",value:f.value,start:m.startDate,end:m.endDate,onChange:m.bindBirthdayDateChange},{default:a((()=>[i(y,{style:{padding:"8rpx 0"}},{default:a((()=>[d(u(f.value),1)])),_:1})])),_:1},8,["value","start","end","onChange"])])),_:1})])),_:1})):n("",!0),"region"===f.editFieldKey?(t(),l(y,{key:4},{default:a((()=>[i(y,{onClick:r[4]||(r[4]=e=>f.regionSelectorShow=!0),style:{padding:"8rpx 0"}},{default:a((()=>[d(u(f.value.join(" ")),1)])),_:1}),i(C,{modelValue:f.regionSelectorShow,"onUpdate:modelValue":r[5]||(r[5]=e=>f.regionSelectorShow=e),mode:"region","default-region":f.value,"confirm-color":"#272a30",onConfirm:m.regionSelectConfirm},null,8,["modelValue","default-region","onConfirm"])])),_:1})):n("",!0),"career"===f.editFieldKey?(t(),l(y,{key:5},{default:a((()=>[i(y,{class:"career-edit-content"},{default:a((()=>[(t(!0),_(D,null,w(f.value,((e,o)=>(t(),l(y,{key:e,class:"career-tag"},{default:a((()=>[i(g,null,{default:a((()=>[d(u(e.split("-")[1]),1)])),_:2},1024),i(S,{type:"closeempty",size:"28rpx",style:{"margin-left":"8rpx"},onClick:e=>m.removeCareer(o)},null,8,["onClick"])])),_:2},1024)))),128)),f.value.length<2?(t(),l(y,{key:0,class:"career-tag",style:{color:"#515151"},onClick:m.careerSelectStart},{default:a((()=>[i(g,null,{default:a((()=>[d("添加职业")])),_:1}),i(S,{type:"plusempty",size:"28rpx",color:"#515151"})])),_:1},8,["onClick"])):n("",!0)])),_:1}),i(y,{style:{"text-align":"right",color:"#ccc"}},{default:a((()=>[d(u(f.value&&f.value.length||0)+"/2 ",1)])),_:1}),i(C,{modelValue:f.careerSelectorShow,"onUpdate:modelValue":r[6]||(r[6]=e=>f.careerSelectorShow=e),mode:"multiSelector",range:f.careerData,"default-selector":f.careerSelectorDefaultSelect,"confirm-color":"#272a30",onColumnchange:m.careerColumnChange,onConfirm:m.careerSelectConfirm},null,8,["modelValue","range","default-selector","onColumnchange","onConfirm"])])),_:1})):n("",!0),"mbti"===f.editFieldKey?(t(),l(y,{key:6},{default:a((()=>[i(y,{onClick:m.mbtiSelectStart,style:{padding:"8rpx 0"}},{default:a((()=>[d(u(f.value),1)])),_:1},8,["onClick"]),i(C,{modelValue:f.mbtiSelectorShow,"onUpdate:modelValue":r[7]||(r[7]=e=>f.mbtiSelectorShow=e),mode:"selector",range:f.MbtiData,"default-selector":f.mbtiSelectorDefaultSelect,"confirm-color":"#272a30",onConfirm:m.mbtiSelectConfirm},null,8,["modelValue","range","default-selector","onConfirm"])])),_:1})):n("",!0)])),_:1}),f.rule[f.editFieldKey]?(t(),l(y,{key:1,class:"rule"},{default:a((()=>[d(u(f.rule[f.editFieldKey].message),1)])),_:1})):n("",!0),i(y,{class:"privacy-container"}),i(y,{class:"btn-container"},{default:a((()=>[i(I,{"custom-style":{backgroundColor:f.modifiable?"#272a30":"#eee",color:f.modifiable?"#fff":"#999",border:"none"},"hover-class":"none","hair-line":!1,disabled:!f.modifiable,onClick:m.handleSave},{default:a((()=>[d("保存")])),_:1},8,["custom-style","disabled","onClick"])])),_:1})])),_:1})}],["__scopeId","data-v-60909b94"]]);export{V as default};
