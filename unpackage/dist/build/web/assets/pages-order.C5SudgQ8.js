import{c as e,r as t,o,a as i,w as s,i as a,b as l,d as n,n as c,h as r,t as d,s as u,k as p,v as h,e as m,f as g,F as f,S as y,x as _}from"./index-CU53kGQk.js";import{_ as S}from"./uni-icons.DhGjUbg6.js";import{r as w}from"./uni-app.es.CQ6hYvRK.js";import{_ as z}from"./_plugin-vue_export-helper.BCo6x5W8.js";const b=z({name:"UniNoticeBar",emits:["click","getmore","close"],props:{text:{type:String,default:""},moreText:{type:String,default:""},backgroundColor:{type:String,default:"#FFF9EA"},speed:{type:Number,default:100},color:{type:String,default:"#FF9A43"},fontSize:{type:Number,default:14},moreColor:{type:String,default:"#FF9A43"},single:{type:[Boolean,String],default:!1},scrollable:{type:[Boolean,String],default:!1},showIcon:{type:[Boolean,String],default:!1},showGetMore:{type:[Boolean,String],default:!1},showClose:{type:[Boolean,String],default:!1}},data:()=>({textWidth:0,boxWidth:0,wrapWidth:"",webviewHide:!1,elId:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,elIdBox:`Uni_${Math.ceil(1e6*Math.random()).toString(36)}`,show:!0,animationDuration:"none",animationPlayState:"paused",animationDelay:"0s"}),watch:{text:function(e,t){this.initSize()}},computed:{isShowGetMore(){return!0===this.showGetMore||"true"===this.showGetMore},isShowClose(){return!(!0!==this.showClose&&"true"!==this.showClose||!1!==this.showGetMore&&"false"!==this.showGetMore)}},mounted(){this.$nextTick((()=>{this.initSize()}))},methods:{initSize(){if(this.scrollable){let t=[],o=new Promise(((t,o)=>{e().in(this).select(`#${this.elId}`).boundingClientRect().exec((e=>{this.textWidth=e[0].width,t()}))})),i=new Promise(((t,o)=>{e().in(this).select(`#${this.elIdBox}`).boundingClientRect().exec((e=>{this.boxWidth=e[0].width,t()}))}));t.push(o),t.push(i),Promise.all(t).then((()=>{this.animationDuration=this.textWidth/this.speed+"s",this.animationDelay=`-${this.boxWidth/this.speed}s`,setTimeout((()=>{this.animationPlayState="running"}),1e3)}))}},loopAnimation(){},clickMore(){this.$emit("getmore")},close(){this.show=!1,this.$emit("close")},onClick(){this.$emit("click")}}},[["render",function(e,h,m,g,f,y){const _=w(t("uni-icons"),S),z=u,b=p;return f.show?(o(),i(b,{key:0,class:"uni-noticebar",style:c({backgroundColor:m.backgroundColor}),onClick:y.onClick},{default:s((()=>[!0===m.showIcon||"true"===m.showIcon?(o(),i(_,{key:0,class:"uni-noticebar-icon",type:"sound",color:m.color,size:1.5*m.fontSize},null,8,["color","size"])):a("",!0),l(b,{ref:"textBox",class:n(["uni-noticebar__content-wrapper",{"uni-noticebar__content-wrapper--scrollable":m.scrollable,"uni-noticebar__content-wrapper--single":!m.scrollable&&(m.single||m.moreText)}]),style:c({height:m.scrollable?1.5*m.fontSize+"px":"auto"})},{default:s((()=>[l(b,{id:f.elIdBox,class:n(["uni-noticebar__content",{"uni-noticebar__content--scrollable":m.scrollable,"uni-noticebar__content--single":!m.scrollable&&(m.single||m.moreText)}])},{default:s((()=>[l(z,{id:f.elId,ref:"animationEle",class:n(["uni-noticebar__content-text",{"uni-noticebar__content-text--scrollable":m.scrollable,"uni-noticebar__content-text--single":!m.scrollable&&(m.single||m.showGetMore)}]),style:c({color:m.color,fontSize:m.fontSize+"px",lineHeight:1.5*m.fontSize+"px",width:f.wrapWidth+"px",animationDuration:f.animationDuration,"-webkit-animationDuration":f.animationDuration,animationPlayState:f.webviewHide?"paused":f.animationPlayState,"-webkit-animationPlayState":f.webviewHide?"paused":f.animationPlayState,animationDelay:f.animationDelay,"-webkit-animationDelay":f.animationDelay})},{default:s((()=>[r(d(m.text),1)])),_:1},8,["id","class","style"])])),_:1},8,["id","class"])])),_:1},8,["class","style"]),y.isShowGetMore?(o(),i(b,{key:1,class:"uni-noticebar__more uni-cursor-point",onClick:y.clickMore},{default:s((()=>[m.moreText.length>0?(o(),i(z,{key:0,style:c({color:m.moreColor,fontSize:m.fontSize+"px"})},{default:s((()=>[r(d(m.moreText),1)])),_:1},8,["style"])):(o(),i(_,{key:1,type:"right",color:m.moreColor,size:1.1*m.fontSize},null,8,["color","size"]))])),_:1},8,["onClick"])):a("",!0),y.isShowClose?(o(),i(b,{key:2,class:"uni-noticebar-close uni-cursor-point"},{default:s((()=>[l(_,{type:"closeempty",color:m.color,size:1.1*m.fontSize,onClick:y.close},null,8,["color","size","onClick"])])),_:1})):a("",!0)])),_:1},8,["style","onClick"])):a("",!0)}],["__scopeId","data-v-a72af3d1"]]);const k=z({data:()=>({storeInfo:{name:"浙江杭州文新地铁站店",distance:"200"},pickUpType:0,categoryList:[{id:0,name:"人气Top",desc:"必喝爆款，无限回购",goods:[{id:0,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁生椰拿铁生椰拿铁生椰拿铁生椰拿铁生椰拿铁",desc:"3年突破7亿杯，原创YYDS！3年突破7亿杯，原创YYDS！3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:1,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:2,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:3,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:4,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:5,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:6,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"}]},{id:1,name:"爆款套餐",desc:"必喝爆款，无限回购"},{id:2,name:"520限定",desc:"必喝爆款，无限回购"},{id:3,name:"健康冰咖季",desc:"必喝爆款，无限回购"},{id:4,name:"生椰家族",desc:"必喝爆款，无限回购"},{id:5,name:"美式家族",desc:"必喝爆款，无限回购"},{id:6,name:"酱香拿铁",desc:"必喝爆款，无限回购"},{id:7,name:"中国茶咖",desc:"必喝爆款，无限回购"},{id:8,name:"大师咖啡",desc:"必喝爆款，无限回购"},{id:9,name:"瑞纳冰",desc:"必喝爆款，无限回购"},{id:10,name:"SOE小黑杯",desc:"必喝爆款，无限回购",goods:[{id:0,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:1,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"},{id:2,categoryId:0,img:"https://zzh-assets.oss-cn-hangzhou.aliyuncs.com/uni-demo-app/coffee-01.jpg",name:"生椰拿铁",desc:"3年突破7亿杯，原创YYDS！",price:"11.02",preferentialPrice:"9.9"}]}],scrollViewHeight:0,currentCategoryId:0,menuRightScrollTop:0,oldMenuRightScrollTop:0,timer:null}),computed:{categoryGoodsCardScrollTopMap(){const e=this.categoryList.map((e=>70+96*(e.goods&&e.goods.length||0)+12));return e.map(((t,o)=>e.slice(0,o+1).reduce(((e,t)=>e+t),0)))}},methods:{handleChangePickUpType(e){this.pickUpType=e},handleClickCategory(e,t){e.id!==this.currentCategoryId&&(this.currentCategoryId=e.id,this.menuRightScrollTop=this.oldMenuRightScrollTop,this.$nextTick((()=>{this.menuRightScrollTop=0===t?0:this.categoryGoodsCardScrollTopMap[t-1]})))},handleMenuRightScroll(e){for(let t=0;t<this.categoryGoodsCardScrollTopMap.length;t++)if(e.detail.scrollTop<this.categoryGoodsCardScrollTopMap[t]){this.currentCategoryId=this.categoryList[t].id,this.oldMenuRightScrollTop=e.detail.scrollTop;break}}},onReady(){h({success:t=>{const o=t.windowHeight;e().select(".menu-container").boundingClientRect().exec((e=>{this.scrollViewHeight=o-e[0].top}))}})}},[["render",function(e,a,h,z,k,C){const x=u,I=w(t("uni-icons"),S),T=p,D=w(t("uni-notice-bar"),b),Y=y,M=_;return o(),i(T,{class:"order-container"},{default:s((()=>[l(T,{class:"store-info"},{default:s((()=>[l(T,{class:"store-location"},{default:s((()=>[l(T,{class:"store-name"},{default:s((()=>[l(x,{style:{"margin-right":"6px"}},{default:s((()=>[r(d(k.storeInfo.name),1)])),_:1}),l(I,{type:"right",size:"14"})])),_:1}),l(T,{class:"store-distance"},{default:s((()=>[l(I,{type:"location",size:"14",color:"#666666"}),r(" 距您"+d(k.storeInfo.distance)+"m",1)])),_:1})])),_:1}),l(T,{class:"pick-up-type",onClick:a[0]||(a[0]=e=>C.handleChangePickUpType(0===k.pickUpType?1:0))},{default:s((()=>[l(T,{class:n(["pick-up-type-item",{active:0===k.pickUpType}])},{default:s((()=>[r("自提")])),_:1},8,["class"]),l(T,{class:n(["pick-up-type-item",{active:1===k.pickUpType}])},{default:s((()=>[r("外送")])),_:1},8,["class"])])),_:1})])),_:1}),l(T,{class:"notice-container"},{default:s((()=>[l(D,{"show-icon":"",scrollable:"","background-color":"#f5f7fc",color:"#2d40ed",text:"拿铁咖啡限时优惠，快来和你的小伙伴一起体验 9.9 的夏日清爽吧～"})])),_:1}),l(T,{class:"menu-container"},{default:s((()=>[l(T,{class:"menu-left"},{default:s((()=>[l(Y,{"scroll-y":"true",style:c({height:k.scrollViewHeight+"px"}),enhanced:!0,"show-scrollbar":!1,"scroll-with-animation":!0,"scroll-into-view":"menu-left-"+k.currentCategoryId},{default:s((()=>[l(T,{class:"category-list"},{default:s((()=>[(o(!0),m(f,null,g(k.categoryList,((e,t)=>(o(),i(T,{key:e.id,id:"menu-left-"+e.id,class:n(["category-item",{active:e.id===k.currentCategoryId}]),onClick:o=>C.handleClickCategory(e,t)},{default:s((()=>[l(T,{class:"category-item-name"},{default:s((()=>[r(d(e.name),1)])),_:2},1024)])),_:2},1032,["id","class","onClick"])))),128))])),_:1})])),_:1},8,["style","scroll-into-view"])])),_:1}),l(T,{class:"menu-right"},{default:s((()=>[l(Y,{"scroll-y":"true",style:c({height:k.scrollViewHeight+"px"}),enhanced:!0,"show-scrollbar":!1,"scroll-with-animation":!0,"scroll-top":k.menuRightScrollTop,onScroll:C.handleMenuRightScroll},{default:s((()=>[l(T,{class:"categroy-goods-list"},{default:s((()=>[(o(!0),m(f,null,g(k.categoryList,(e=>(o(),i(T,{key:e.id,class:"categroy-goods card"},{default:s((()=>[l(T,{class:"category-info"},{default:s((()=>[l(T,{class:"category-name"},{default:s((()=>[r(d(e.name),1)])),_:2},1024),l(T,{class:"category-desc"},{default:s((()=>[r(d(e.desc),1)])),_:2},1024)])),_:2},1024),l(T,{class:"goods-list"},{default:s((()=>[(o(!0),m(f,null,g(e.goods,(e=>(o(),i(T,{key:e.id,class:"product"},{default:s((()=>[l(T,{class:"product-picture"},{default:s((()=>[l(M,{src:e.img,alt:"product-img"},null,8,["src"])])),_:2},1024),l(T,{class:"product-info-price"},{default:s((()=>[l(T,{class:"product-info"},{default:s((()=>[l(T,{class:"product-name"},{default:s((()=>[r(d(e.name),1)])),_:2},1024),l(T,{class:"product-desc"},{default:s((()=>[r(d(e.desc),1)])),_:2},1024)])),_:2},1024),l(T,{class:"product-price-buy"},{default:s((()=>[l(T,{class:"product-price"},{default:s((()=>[l(T,{class:"discount-price"},{default:s((()=>[l(x,{class:"unit"},{default:s((()=>[r("¥")])),_:1}),l(x,{class:"num"},{default:s((()=>[r(d(e.preferentialPrice),1)])),_:2},1024)])),_:2},1024),l(T,{class:"origin-price"},{default:s((()=>[l(x,{class:"unit"},{default:s((()=>[r("¥")])),_:1}),l(x,{class:"num"},{default:s((()=>[r(d(e.price),1)])),_:2},1024)])),_:2},1024)])),_:2},1024),l(T,{class:"add-btn"},{default:s((()=>[l(I,{type:"plus-filled",size:"30"})])),_:1})])),_:2},1024)])),_:2},1024)])),_:2},1024)))),128))])),_:2},1024)])),_:2},1024)))),128)),l(T,{class:"no-more"},{default:s((()=>[r("我是有底线的～")])),_:1})])),_:1})])),_:1},8,["style","scroll-top","onScroll"])])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-f958932f"]]);export{k as default};
